{"version":3,"file":"ImageViewer.js","sources":["../../../src/client/define.ts","../../../src/client/utils/index.ts","../../../src/client/components/PhotoSwipe.vue","../../../src/client/components/PhotoSwipe.vue?vue&type=template&id=544dd514&lang.js"],"sourcesContent":["import * as PhotoSwipe from \"photoswipe\";\nimport type { PhotoSwipeLocaleConfig } from \"../shared\";\n\ndeclare const PHOTO_SWIPE_SELECTOR: string;\ndeclare const PHOTO_SWIPE_DELAY: number;\ndeclare const PHOTO_SWIPE_OPTIONS: PhotoSwipe.Options;\ndeclare const PHOTO_SWIPE_LOCALES: PhotoSwipeLocaleConfig;\n\nexport const imageSelector = PHOTO_SWIPE_SELECTOR;\n\nexport const locales = PHOTO_SWIPE_LOCALES;\n\nexport const delay = PHOTO_SWIPE_DELAY;\n\nexport const options = PHOTO_SWIPE_OPTIONS;\n","import * as PhotoSwipe from \"photoswipe\";\n\nexport interface PhotoSwipeImageInfo extends PhotoSwipe.Item {\n  title: string;\n}\n\nexport const getImageInfo = (image: HTMLImageElement): PhotoSwipeImageInfo => {\n  return {\n    src: image.src,\n    w: image.naturalWidth,\n    h: image.naturalHeight,\n    title: image.alt,\n  };\n};\n\nexport interface PhotoSwipeImages {\n  elements: HTMLImageElement[];\n  infos: PhotoSwipeImageInfo[];\n}\n\nexport const getImages = (selector: string): Promise<PhotoSwipeImages> => {\n  const promises: Promise<PhotoSwipeImageInfo>[] = [];\n  const images = Array.from(\n    document.querySelectorAll<HTMLImageElement>(selector)\n  );\n\n  images.forEach((image, index) => {\n    promises[index] = new Promise((resolve, reject) => {\n      if (image.complete) resolve(getImageInfo(image));\n      else {\n        image.onload = (): void => resolve(getImageInfo(image));\n        image.onerror = (err): void => reject(err);\n      }\n    });\n  });\n\n  return Promise.all(promises).then((infos) => ({ elements: images, infos }));\n};\n","<template>\n  <!-- Root element of PhotoSwipe. Must have class pswp. -->\n  <div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n    <!-- Background of PhotoSwipe. \n    It’s a separate element, as animating opacity is faster than rgba().-->\n    <div class=\"pswp__bg\" />\n\n    <!-- Slides wrapper with overflow:hidden. -->\n    <div class=\"pswp__scroll-wrap\">\n      <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->\n      <div class=\"pswp__container\">\n        <!-- don’t modify these 3 pswp__item elements, data is added later on -->\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n      </div>\n\n      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->\n      <div class=\"pswp__ui pswp__ui--hidden\">\n        <div class=\"pswp__top-bar\">\n          <!--  Controls are self-explanatory. Order can be changed. -->\n\n          <div class=\"pswp__counter\" />\n\n          <button\n            class=\"pswp__button pswp__button--close\"\n            :title=\"locale.close\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--share\"\n            :title=\"locale.share\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--fs\"\n            :title=\"locale.fullscreen\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--zoom\"\n            :title=\"locale.zoom\"\n          />\n\n          <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->\n          <!-- element will get class pswp__preloader--active when preloader is running -->\n          <div class=\"pswp__preloader\">\n            <div class=\"pswp__preloader__icn\">\n              <div class=\"pswp__preloader__cut\">\n                <div class=\"pswp__preloader__donut\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"\n        >\n          <div class=\"pswp__share-tooltip\" />\n        </div>\n\n        <button\n          class=\"pswp__button pswp__button--arrow--left\"\n          :title=\"locale.prev\"\n        />\n\n        <button\n          class=\"pswp__button pswp__button--arrow--right\"\n          :title=\"locale.next\"\n        />\n\n        <div class=\"pswp__caption\">\n          <div class=\"pswp__caption__center\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useLocaleConfig } from \"@mr-hope/vuepress-shared/lib/client\";\nimport { defineComponent, onMounted, watch } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { delay, imageSelector, locales, options } from \"../define\";\nimport { getImages } from \"../utils\";\n\nimport \"photoswipe/dist/photoswipe.css\";\nimport \"photoswipe/dist/default-skin/default-skin.css\";\n\nexport default defineComponent({\n  name: \"PhotoSwipe\",\n\n  setup() {\n    const route = useRoute();\n    const locale = useLocaleConfig(locales);\n\n    const initPhotoSwipe = (): void => {\n      const pswp = document.querySelector(\".pswp\") as HTMLElement;\n\n      void Promise.all([\n        import(/* webpackChunkName: \"photo-swipe\" */ \"photoswipe\"),\n        import(\n          /* webpackChunkName: \"photo-swipe\" */ \"photoswipe/dist/photoswipe-ui-default\"\n        ),\n        new Promise<void>((resolve) => setTimeout(resolve, delay)).then(() =>\n          getImages(imageSelector)\n        ),\n      ]).then(([photoSwipe, photoSwipeUIDefault, images]) => {\n        images.elements.forEach((image, index) => {\n          image.addEventListener(\"click\", (): void => {\n            const gallery = new photoSwipe.default(\n              pswp,\n              photoSwipeUIDefault.default,\n              images.infos,\n              {\n                shareButtons: locale.value.buttons,\n                ...options,\n                index,\n              }\n            );\n\n            gallery.init();\n          });\n        });\n      });\n    };\n\n    watch(\n      () => route.path,\n      () => initPhotoSwipe()\n    );\n\n    onMounted(() => initPhotoSwipe());\n\n    return { locale };\n  },\n});\n</script>\n","<template>\n  <!-- Root element of PhotoSwipe. Must have class pswp. -->\n  <div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n    <!-- Background of PhotoSwipe. \n    It’s a separate element, as animating opacity is faster than rgba().-->\n    <div class=\"pswp__bg\" />\n\n    <!-- Slides wrapper with overflow:hidden. -->\n    <div class=\"pswp__scroll-wrap\">\n      <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->\n      <div class=\"pswp__container\">\n        <!-- don’t modify these 3 pswp__item elements, data is added later on -->\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n        <div class=\"pswp__item\" />\n      </div>\n\n      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->\n      <div class=\"pswp__ui pswp__ui--hidden\">\n        <div class=\"pswp__top-bar\">\n          <!--  Controls are self-explanatory. Order can be changed. -->\n\n          <div class=\"pswp__counter\" />\n\n          <button\n            class=\"pswp__button pswp__button--close\"\n            :title=\"locale.close\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--share\"\n            :title=\"locale.share\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--fs\"\n            :title=\"locale.fullscreen\"\n          />\n\n          <button\n            class=\"pswp__button pswp__button--zoom\"\n            :title=\"locale.zoom\"\n          />\n\n          <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->\n          <!-- element will get class pswp__preloader--active when preloader is running -->\n          <div class=\"pswp__preloader\">\n            <div class=\"pswp__preloader__icn\">\n              <div class=\"pswp__preloader__cut\">\n                <div class=\"pswp__preloader__donut\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\"\n        >\n          <div class=\"pswp__share-tooltip\" />\n        </div>\n\n        <button\n          class=\"pswp__button pswp__button--arrow--left\"\n          :title=\"locale.prev\"\n        />\n\n        <button\n          class=\"pswp__button pswp__button--arrow--right\"\n          :title=\"locale.next\"\n        />\n\n        <div class=\"pswp__caption\">\n          <div class=\"pswp__caption__center\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useLocaleConfig } from \"@mr-hope/vuepress-shared/lib/client\";\nimport { defineComponent, onMounted, watch } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { delay, imageSelector, locales, options } from \"../define\";\nimport { getImages } from \"../utils\";\n\nimport \"photoswipe/dist/photoswipe.css\";\nimport \"photoswipe/dist/default-skin/default-skin.css\";\n\nexport default defineComponent({\n  name: \"PhotoSwipe\",\n\n  setup() {\n    const route = useRoute();\n    const locale = useLocaleConfig(locales);\n\n    const initPhotoSwipe = (): void => {\n      const pswp = document.querySelector(\".pswp\") as HTMLElement;\n\n      void Promise.all([\n        import(/* webpackChunkName: \"photo-swipe\" */ \"photoswipe\"),\n        import(\n          /* webpackChunkName: \"photo-swipe\" */ \"photoswipe/dist/photoswipe-ui-default\"\n        ),\n        new Promise<void>((resolve) => setTimeout(resolve, delay)).then(() =>\n          getImages(imageSelector)\n        ),\n      ]).then(([photoSwipe, photoSwipeUIDefault, images]) => {\n        images.elements.forEach((image, index) => {\n          image.addEventListener(\"click\", (): void => {\n            const gallery = new photoSwipe.default(\n              pswp,\n              photoSwipeUIDefault.default,\n              images.infos,\n              {\n                shareButtons: locale.value.buttons,\n                ...options,\n                index,\n              }\n            );\n\n            gallery.init();\n          });\n        });\n      });\n    };\n\n    watch(\n      () => route.path,\n      () => initPhotoSwipe()\n    );\n\n    onMounted(() => initPhotoSwipe());\n\n    return { locale };\n  },\n});\n</script>\n"],"names":["imageSelector","PHOTO_SWIPE_SELECTOR","locales","PHOTO_SWIPE_LOCALES","delay","PHOTO_SWIPE_DELAY","options","PHOTO_SWIPE_OPTIONS","getImageInfo","image","src","w","naturalWidth","h","naturalHeight","title","alt","script","defineComponent","name","setup","route","useRoute","locale","useLocaleConfig","initPhotoSwipe","pswp","document","querySelector","Promise","all","import","resolve","setTimeout","then","selector","promises","images","Array","from","querySelectorAll","forEach","index","reject","complete","onload","onerror","err","infos","elements","getImages","photoSwipe","photoSwipeUIDefault","addEventListener","default","shareButtons","value","buttons","init","watch","path","onMounted","class","tabindex","role","_createElementVNode","_hoisted_3","_createCommentVNode","_hoisted_5","_hoisted_6","_hoisted_1","_hoisted_2","_hoisted_4","_hoisted_7","_ctx","close","share","fullscreen","zoom","_hoisted_12","_hoisted_13","prev","next","_hoisted_16"],"mappings":"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"}