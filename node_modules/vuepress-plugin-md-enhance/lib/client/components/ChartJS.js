import{defineComponent,ref,onMounted,h}from"vue";import"@mr-hope/vuepress-shared/lib/client";import"../styles/chart.scss";const loadingSvgString='<svg xmlns="http://www.w3.org/2000/svg" class="loading-icon" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.3333333333333333s"/></circle><circle cx="50" cy="50" r="0" fill="none" stroke="currentColor" stroke-width="2"><animate attributeName="r" repeatCount="indefinite" dur="1s" values="0;40" keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/><animate attributeName="opacity" repeatCount="indefinite" dur="1s" values="1;0" keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.6666666666666666s"/></circle></svg>',parseChartConfig=str=>JSON.parse(str,((_key,value)=>{if("string"!=typeof value||value.length<8)return value;const prefix=value.substring(0,8);return"function"===prefix?eval(`(${value})`):"_PxEgEr_"===prefix||"_NuFrRa_"===prefix?eval(value.slice(8)):value}));var ChartJS=defineComponent({name:"ChartJS",props:{title:{type:String,default:""},config:{type:String,required:!0},id:{type:String,required:!0}},setup(e){const t=ref(null),i=ref(null),r=ref(!0);return onMounted((()=>{Promise.all([import("chart.js/auto"),new Promise((e=>setTimeout(e,MARKDOWN_ENHANCE_DELAY)))]).then((([{default:t}])=>{var n;t.defaults.maintainAspectRatio=!1;const a=parseChartConfig(decodeURIComponent(e.config));new t(null===(n=i.value)||void 0===n?void 0:n.getContext("2d"),a),r.value=!1}))})),()=>[e.title?h("div",{class:"chart-title"},e.title):null,r.value?h("div",{class:["chart-loading-wrapper"],innerHTML:loadingSvgString}):null,h("div",{ref:t,class:"chart-wrapper",id:e.id,style:{display:r.value?"none":"block"}},h("canvas",{ref:i,height:400}))]}});export{ChartJS as default};
//# sourceMappingURL=ChartJS.js.map
