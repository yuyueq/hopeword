{"version":3,"file":"PWAInstall.js","sources":["../../../src/client/components/icons.ts","../../../src/client/define.ts","../../../src/client/components/PWAInstallModal.vue","../../../src/client/components/PWAInstallModal.vue?vue&type=template&id=3515dc64&lang.js","../../../src/client/global-components/PWAInstall.ts"],"sourcesContent":["import { IconBase } from \"@mr-hope/vuepress-shared/lib/client\";\nimport { h } from \"vue\";\nimport type { FunctionalComponent } from \"vue\";\n\nexport const ArrowLeftIcon: FunctionalComponent = () =>\n  h(\n    IconBase,\n    { name: \"arrow-left\" },\n\n    () =>\n      h(\"path\", {\n        d: \"M802.8 448h-428l166-158.8c23.8-25 23.8-65.4 0-90.4s-62.4-25-86.4 0L178 466.8c-12 11.6-18 27.4-18 44.8v0.8c0 17.4 6 33.2 18 44.8l276.2 268c24 25 62.6 25 86.4 0 23.8-25 23.8-65.4 0-90.4l-166-158.8h428c33.8 0 61.2-28.6 61.2-64 0.2-36-27.2-64-61-64z\",\n      })\n  );\n\nArrowLeftIcon.displayName = \"ArrowLeftIcon\";\n\nexport const ArrowRightIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"arrow-right\" }, () =>\n    h(\"path\", {\n      d: \"M569.8 825.2l276.2-268c12-11.6 18-27.4 18-44.8v-0.8c0-17.4-6-33.2-18-44.8l-276.2-268c-24-25-62.6-25-86.4 0-23.8 25-23.8 65.4 0 90.4l166 158.8h-428c-34 0-61.4 28.6-61.4 64 0 36 27.4 64 61.2 64h428l-166 158.8c-23.8 25-23.8 65.4 0 90.4 24 25 62.6 25 86.6 0z\",\n    })\n  );\n\nArrowRightIcon.displayName = \"ArrowRightIcon\";\n\nexport const CloseIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"close\" }, () =>\n    h(\"path\", {\n      d: \"M589.654 511.965 1007.212 84.22a49.777 49.777 0 0 0-.73-70.02 49.046 49.046 0 0 0-69.687.665L519.967 441.946 85.882 14.2a49.08 49.08 0 0 0-69.687.664 49.777 49.777 0 0 0 .664 70.019l433.454 427.082L16.859 939.048a49.777 49.777 0 0 0-.664 70.019 49.013 49.013 0 0 0 69.687.663l434.085-427.746 416.828 427.083A49.013 49.013 0 0 0 972.037 1024a48.416 48.416 0 0 0 34.512-14.27 49.777 49.777 0 0 0 .73-70.019z\",\n    })\n  );\n\nCloseIcon.displayName = \"CloseIcon\";\n\nexport const UpdateIcon: FunctionalComponent = () =>\n  h(IconBase, { name: \"update\" }, () =>\n    h(\"path\", {\n      d: \"M949.949 146.25v255.826c0 21.981-13.989 35.97-35.97 35.97H658.154c-13.988 0-25.983-7.992-33.973-21.981-5.997-13.989-4-27.977 7.991-39.97l79.942-77.946c-55.954-51.973-121.918-77.955-199.863-77.955-37.975 0-75.95 8.002-113.924 21.99-37.975 15.985-67.948 37.976-91.934 63.957-25.982 23.987-47.973 53.96-63.957 91.934-29.983 73.955-29.983 153.895 0 227.85 15.984 37.976 37.975 67.947 63.957 91.934 23.986 25.982 53.959 47.973 91.934 63.956 37.974 13.989 75.95 21.991 113.924 21.991 45.967 0 87.942-9.998 127.913-29.982 41.976-17.99 75.951-45.967 101.931-83.943 7.993-4 11.994-5.995 13.989-5.995 5.997 0 9.998 1.994 13.988 5.995l77.958 77.946c3.989 4 5.986 7.993 5.986 11.994 0 1.994-1.996 5.995-3.99 11.994-43.973 51.962-93.941 91.934-151.9 117.914-53.958 25.983-115.92 39.972-185.874 39.972-61.961 0-119.921-11.984-169.89-33.973-57.96-25.985-105.923-57.963-139.896-93.943-35.98-33.972-67.958-81.936-93.94-139.897-45.967-101.93-45.967-237.846 0-339.777 25.982-57.96 57.96-105.923 93.94-139.896 33.973-35.98 81.936-67.958 139.896-93.94 49.968-21.99 107.928-33.974 169.89-33.974 55.963 0 109.923 9.988 161.885 29.973 53.97 21.99 101.933 51.963 139.908 89.938l73.954-73.944c9.987-9.998 23.987-13.988 39.971-8.002 13.988 8.002 21.98 19.995 21.98 33.984z\",\n    })\n  );\n\nUpdateIcon.displayName = \"UpdateIcon\";\n","import type { PWALocaleConfig } from \"../shared\";\n\ndeclare const PWA_LOCALES: PWALocaleConfig;\n\nexport const locales = PWA_LOCALES;\n","<template>\n  <div id=\"install-modal-wrapper\">\n    <div class=\"background\" @click=\"$emit('toggle', false)\" />\n\n    <div class=\"install-modal\">\n      <div class=\"header\">\n        <button\n          class=\"close-button\"\n          :aria-label=\"locale.close\"\n          @click=\"$emit('toggle', false)\"\n        >\n          <CloseIcon />\n        </button>\n        <div class=\"logo\">\n          <img\n            v-if=\"manifest.icons\"\n            :src=\"manifest.icons[0].src\"\n            alt=\"App Logo\"\n          />\n          <div class=\"title\">\n            <h1>{{ manifest.short_name || manifest.name }}</h1>\n            <p class=\"desc\">{{ locale.explain }}</p>\n          </div>\n        </div>\n      </div>\n      <div class=\"content\">\n        <div class=\"highlight\">\n          <div v-if=\"manifest.features\" class=\"feature-wrapper\">\n            <h3>{{ locale.feature }}</h3>\n            <ul v-if=\"manifest.features\">\n              <li\n                v-for=\"feature in manifest.features\"\n                :key=\"feature\"\n                v-text=\"feature\"\n              />\n            </ul>\n          </div>\n\n          <div v-if=\"manifest.screenshots\" class=\"screenshot-wrapper\">\n            <button :aria-label=\"locale.prevImage\" @click=\"scrolltoLeft\">\n              <ArrowLeftIcon />\n            </button>\n            <section class=\"screenshot\">\n              <div\n                v-for=\"screenshot in manifest.screenshots\"\n                :key=\"screenshot.src\"\n              >\n                <img alt=\"App Screenshot\" :src=\"screenshot.src\" />\n              </div>\n            </section>\n            <button :aria-label=\"locale.nextImage\" @click=\"scrolltoRight\">\n              <ArrowRightIcon />\n            </button>\n          </div>\n        </div>\n        <div class=\"description\">\n          <h3 v-text=\"locale.desc\" />\n          <p v-text=\"manifest.description\" />\n        </div>\n      </div>\n\n      <div v-if=\"useHint\" class=\"ios-text\" @click=\"hint\">\n        <p>{{ locale.iOSInstall }}</p>\n        <button class=\"success\">Got it!</button>\n      </div>\n      <div v-else class=\"button-wrapper\">\n        <button class=\"install-button\" @click=\"install\">\n          {{ locale.install }} <span>{{ manifest.short_name }}</span>\n        </button>\n        <button class=\"cancel-button\" @click=\"$emit('toggle', false)\">\n          {{ locale.cancel }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useLocaleConfig } from \"@mr-hope/vuepress-shared/lib/client\";\nimport { withBase } from \"@vuepress/client\";\nimport { onBeforeMount, defineComponent, onMounted, ref } from \"vue\";\nimport { ArrowLeftIcon, ArrowRightIcon, CloseIcon } from \"./icons\";\nimport { locales } from \"../define\";\n\nimport type { ManifestOption } from \"../../shared\";\n\ninterface InstallPromptEvent extends Event {\n  readonly platforms: string;\n  prompt: () => void;\n  readonly userChoice: Promise<{ outcome: \"accepted\" | \"dismissed\" }>;\n}\n\nlet escapeHandler: (event: KeyboardEvent) => void;\nlet installPromptHandler: (event: Event) => void;\n\nexport default defineComponent({\n  name: \"PWAInstallModal\",\n\n  components: {\n    ArrowLeftIcon,\n    ArrowRightIcon,\n    CloseIcon,\n  },\n\n  props: {\n    useHint: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: [\"can-install\", \"hint\", \"toggle\"],\n\n  setup(_props, { emit }) {\n    const locale = useLocaleConfig(locales);\n\n    const manifest = ref<ManifestOption>({});\n    const isIOS = ref(false);\n    const deferredprompt = ref<InstallPromptEvent | null>(null);\n\n    const getManifest = async (): Promise<void> => {\n      const manifestContent = localStorage.getItem(\"manifest\");\n\n      if (manifestContent)\n        manifest.value = JSON.parse(manifestContent) as ManifestOption;\n      else\n        try {\n          const response = await fetch(withBase(\"manifest.webmanifest\"));\n          const data = (await response.json()) as ManifestOption;\n\n          manifest.value = data;\n          localStorage.setItem(\"manifest\", JSON.stringify(data));\n        } catch (err) {\n          console.error(\n            \"[PWA]: Error getting manifest, check that you have a valid web manifest or network connection\"\n          );\n        }\n    };\n\n    const scrolltoLeft = (): void => {\n      const screenshotsDiv = document.querySelector(\".screenshot\");\n\n      if (screenshotsDiv)\n        screenshotsDiv.scrollBy({\n          left: -screenshotsDiv.clientWidth,\n          top: 0,\n          behavior: \"smooth\",\n        });\n    };\n\n    const scrolltoRight = (): void => {\n      const screenshotsDiv = document.querySelector(\".screenshot\");\n\n      if (screenshotsDiv)\n        screenshotsDiv.scrollBy({\n          left: screenshotsDiv.clientWidth,\n          top: 0,\n          behavior: \"smooth\",\n        });\n    };\n\n    const install = async (): Promise<void> => {\n      if (deferredprompt.value) {\n        deferredprompt.value.prompt();\n\n        document.dispatchEvent(new CustomEvent(\"show\"));\n\n        const choiceResult = await deferredprompt.value.userChoice;\n\n        if (choiceResult.outcome === \"accepted\") {\n          console.info(\"PWA has been installed\");\n\n          emit(\"toggle\", false);\n          emit(\"can-install\", false);\n        } else {\n          console.info(\"You choose to not install PWA\");\n\n          emit(\"toggle\", false);\n          emit(\"can-install\", false);\n        }\n      }\n    };\n\n    const hint = (): void => {\n      console.info(\"You accepted the install hint\");\n      emit(\"hint\");\n    };\n\n    onMounted(() => {\n      // eslint-disable-next-line no-prototype-builtins\n      if (window.hasOwnProperty(\"BeforeInstallPromptEvent\")) {\n        installPromptHandler = (event): void => {\n          deferredprompt.value = event as InstallPromptEvent;\n\n          emit(\"can-install\", true);\n          event.preventDefault();\n        };\n\n        // grab an install event\n        window.addEventListener(\"beforeinstallprompt\", installPromptHandler);\n\n        void getManifest();\n\n        escapeHandler = (event): void => {\n          if (event.key === \"Escape\") emit(\"toggle\", false);\n        };\n\n        document.addEventListener(\"keyup\", escapeHandler);\n      }\n    });\n\n    onBeforeMount(() => {\n      // eslint-disable-next-line no-prototype-builtins\n      if (window.hasOwnProperty(\"BeforeInstallPromptEvent\"))\n        document.removeEventListener(\n          \"beforeinstallprompt\",\n          installPromptHandler\n        );\n      document.removeEventListener(\"keyup\", escapeHandler);\n    });\n\n    return {\n      locale,\n      isIOS,\n      manifest,\n\n      getManifest,\n      scrolltoLeft,\n      scrolltoRight,\n      install,\n      hint,\n    };\n  },\n});\n</script>\n","<template>\n  <div id=\"install-modal-wrapper\">\n    <div class=\"background\" @click=\"$emit('toggle', false)\" />\n\n    <div class=\"install-modal\">\n      <div class=\"header\">\n        <button\n          class=\"close-button\"\n          :aria-label=\"locale.close\"\n          @click=\"$emit('toggle', false)\"\n        >\n          <CloseIcon />\n        </button>\n        <div class=\"logo\">\n          <img\n            v-if=\"manifest.icons\"\n            :src=\"manifest.icons[0].src\"\n            alt=\"App Logo\"\n          />\n          <div class=\"title\">\n            <h1>{{ manifest.short_name || manifest.name }}</h1>\n            <p class=\"desc\">{{ locale.explain }}</p>\n          </div>\n        </div>\n      </div>\n      <div class=\"content\">\n        <div class=\"highlight\">\n          <div v-if=\"manifest.features\" class=\"feature-wrapper\">\n            <h3>{{ locale.feature }}</h3>\n            <ul v-if=\"manifest.features\">\n              <li\n                v-for=\"feature in manifest.features\"\n                :key=\"feature\"\n                v-text=\"feature\"\n              />\n            </ul>\n          </div>\n\n          <div v-if=\"manifest.screenshots\" class=\"screenshot-wrapper\">\n            <button :aria-label=\"locale.prevImage\" @click=\"scrolltoLeft\">\n              <ArrowLeftIcon />\n            </button>\n            <section class=\"screenshot\">\n              <div\n                v-for=\"screenshot in manifest.screenshots\"\n                :key=\"screenshot.src\"\n              >\n                <img alt=\"App Screenshot\" :src=\"screenshot.src\" />\n              </div>\n            </section>\n            <button :aria-label=\"locale.nextImage\" @click=\"scrolltoRight\">\n              <ArrowRightIcon />\n            </button>\n          </div>\n        </div>\n        <div class=\"description\">\n          <h3 v-text=\"locale.desc\" />\n          <p v-text=\"manifest.description\" />\n        </div>\n      </div>\n\n      <div v-if=\"useHint\" class=\"ios-text\" @click=\"hint\">\n        <p>{{ locale.iOSInstall }}</p>\n        <button class=\"success\">Got it!</button>\n      </div>\n      <div v-else class=\"button-wrapper\">\n        <button class=\"install-button\" @click=\"install\">\n          {{ locale.install }} <span>{{ manifest.short_name }}</span>\n        </button>\n        <button class=\"cancel-button\" @click=\"$emit('toggle', false)\">\n          {{ locale.cancel }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useLocaleConfig } from \"@mr-hope/vuepress-shared/lib/client\";\nimport { withBase } from \"@vuepress/client\";\nimport { onBeforeMount, defineComponent, onMounted, ref } from \"vue\";\nimport { ArrowLeftIcon, ArrowRightIcon, CloseIcon } from \"./icons\";\nimport { locales } from \"../define\";\n\nimport type { ManifestOption } from \"../../shared\";\n\ninterface InstallPromptEvent extends Event {\n  readonly platforms: string;\n  prompt: () => void;\n  readonly userChoice: Promise<{ outcome: \"accepted\" | \"dismissed\" }>;\n}\n\nlet escapeHandler: (event: KeyboardEvent) => void;\nlet installPromptHandler: (event: Event) => void;\n\nexport default defineComponent({\n  name: \"PWAInstallModal\",\n\n  components: {\n    ArrowLeftIcon,\n    ArrowRightIcon,\n    CloseIcon,\n  },\n\n  props: {\n    useHint: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: [\"can-install\", \"hint\", \"toggle\"],\n\n  setup(_props, { emit }) {\n    const locale = useLocaleConfig(locales);\n\n    const manifest = ref<ManifestOption>({});\n    const isIOS = ref(false);\n    const deferredprompt = ref<InstallPromptEvent | null>(null);\n\n    const getManifest = async (): Promise<void> => {\n      const manifestContent = localStorage.getItem(\"manifest\");\n\n      if (manifestContent)\n        manifest.value = JSON.parse(manifestContent) as ManifestOption;\n      else\n        try {\n          const response = await fetch(withBase(\"manifest.webmanifest\"));\n          const data = (await response.json()) as ManifestOption;\n\n          manifest.value = data;\n          localStorage.setItem(\"manifest\", JSON.stringify(data));\n        } catch (err) {\n          console.error(\n            \"[PWA]: Error getting manifest, check that you have a valid web manifest or network connection\"\n          );\n        }\n    };\n\n    const scrolltoLeft = (): void => {\n      const screenshotsDiv = document.querySelector(\".screenshot\");\n\n      if (screenshotsDiv)\n        screenshotsDiv.scrollBy({\n          left: -screenshotsDiv.clientWidth,\n          top: 0,\n          behavior: \"smooth\",\n        });\n    };\n\n    const scrolltoRight = (): void => {\n      const screenshotsDiv = document.querySelector(\".screenshot\");\n\n      if (screenshotsDiv)\n        screenshotsDiv.scrollBy({\n          left: screenshotsDiv.clientWidth,\n          top: 0,\n          behavior: \"smooth\",\n        });\n    };\n\n    const install = async (): Promise<void> => {\n      if (deferredprompt.value) {\n        deferredprompt.value.prompt();\n\n        document.dispatchEvent(new CustomEvent(\"show\"));\n\n        const choiceResult = await deferredprompt.value.userChoice;\n\n        if (choiceResult.outcome === \"accepted\") {\n          console.info(\"PWA has been installed\");\n\n          emit(\"toggle\", false);\n          emit(\"can-install\", false);\n        } else {\n          console.info(\"You choose to not install PWA\");\n\n          emit(\"toggle\", false);\n          emit(\"can-install\", false);\n        }\n      }\n    };\n\n    const hint = (): void => {\n      console.info(\"You accepted the install hint\");\n      emit(\"hint\");\n    };\n\n    onMounted(() => {\n      // eslint-disable-next-line no-prototype-builtins\n      if (window.hasOwnProperty(\"BeforeInstallPromptEvent\")) {\n        installPromptHandler = (event): void => {\n          deferredprompt.value = event as InstallPromptEvent;\n\n          emit(\"can-install\", true);\n          event.preventDefault();\n        };\n\n        // grab an install event\n        window.addEventListener(\"beforeinstallprompt\", installPromptHandler);\n\n        void getManifest();\n\n        escapeHandler = (event): void => {\n          if (event.key === \"Escape\") emit(\"toggle\", false);\n        };\n\n        document.addEventListener(\"keyup\", escapeHandler);\n      }\n    });\n\n    onBeforeMount(() => {\n      // eslint-disable-next-line no-prototype-builtins\n      if (window.hasOwnProperty(\"BeforeInstallPromptEvent\"))\n        document.removeEventListener(\n          \"beforeinstallprompt\",\n          installPromptHandler\n        );\n      document.removeEventListener(\"keyup\", escapeHandler);\n    });\n\n    return {\n      locale,\n      isIOS,\n      manifest,\n\n      getManifest,\n      scrolltoLeft,\n      scrolltoRight,\n      install,\n      hint,\n    };\n  },\n});\n</script>\n","import { useLocaleConfig } from \"@mr-hope/vuepress-shared/lib/client\";\nimport { computed, defineComponent, h, onMounted, ref } from \"vue\";\nimport PWAInstallModal from \"../components/PWAInstallModal.vue\";\nimport { locales } from \"../define\";\n\nimport type { VNode } from \"vue\";\nimport type { ManifestRelatedApps } from \"../../shared\";\n\nimport \"../styles/modal.scss\";\n\ninterface ModernNavigator extends Navigator {\n  // Unstandard Api\n  getInstalledRelatedApps: () => Promise<ManifestRelatedApps[]>;\n}\n\ninterface SafariNavigator extends Navigator {\n  // Available on Appleâ€™s iOS Safari only.\n  standalone: boolean;\n}\n\nexport default defineComponent({\n  name: \"PWAInstall\",\n\n  setup() {\n    const locale = useLocaleConfig(locales);\n\n    const canInstall = ref(false);\n    const hasRelatedApps = ref(false);\n    const isOpen = ref(false);\n    const isIOS = ref(false);\n    const isSafari = ref(false);\n    const hinted = ref(false);\n\n    const useHint = computed(\n      () => isIOS.value && isSafari.value && hinted.value === false\n    );\n\n    const showInstall = computed(\n      () => (hasRelatedApps.value && canInstall.value) || useHint.value\n    );\n\n    const getInstalledStatus = (): boolean => {\n      if ((navigator as SafariNavigator).standalone)\n        return (navigator as SafariNavigator).standalone;\n\n      return matchMedia(\"(display-mode: standalone)\").matches;\n    };\n\n    const hint = (): void => {\n      isOpen.value = false;\n      hinted.value = true;\n      // do not notify again\n      localStorage.setItem(\"iOS-pwa-hint\", \"hinted\");\n    };\n\n    onMounted(() => {\n      if (getInstalledStatus()) {\n        const { userAgent } = navigator;\n\n        // handle iOS specifically\n        isIOS.value =\n          // regular iPhone\n          userAgent.includes(\"iPhone\") ||\n          // regular iPad\n          userAgent.includes(\"iPad\") ||\n          // iPad pro\n          Boolean(\n            userAgent.includes(\"Macintosh\") &&\n              navigator.maxTouchPoints &&\n              navigator.maxTouchPoints > 2\n          );\n\n        isSafari.value =\n          navigator.userAgent.includes(\"Safari\") &&\n          !userAgent.includes(\"Chrome\");\n\n        hinted.value = Boolean(localStorage.getItem(\"iOS-pwa-hint\"));\n      }\n\n      if (\"getInstalledRelatedApps\" in (navigator as ModernNavigator))\n        void (navigator as ModernNavigator)\n          .getInstalledRelatedApps()\n          .then((result) => {\n            hasRelatedApps.value = result.length > 0;\n          });\n    });\n\n    return (): VNode =>\n      h(\"div\", { id: \"pwa-install\" }, [\n        showInstall.value\n          ? h(\n              \"button\",\n              {\n                class: \"modal-button\",\n                useHint: useHint.value,\n                onClick: () => {\n                  isOpen.value = true;\n                },\n              },\n              locale.value.install\n            )\n          : null,\n        h(PWAInstallModal, {\n          style: {\n            display: isOpen.value ? \"block\" : \"none\",\n          },\n          onCanInstall: (value: boolean) => {\n            canInstall.value = value;\n          },\n          onHint: () => hint(),\n          onToggle: (value: boolean) => {\n            isOpen.value = value;\n          },\n        }),\n      ]);\n  },\n});\n"],"names":["ArrowLeftIcon","h","IconBase","name","d","displayName","ArrowRightIcon","CloseIcon","locales","PWA_LOCALES","escapeHandler","installPromptHandler","script","defineComponent","components","props","useHint","type","Boolean","default","emits","setup","_props","emit","locale","useLocaleConfig","manifest","ref","isIOS","deferredprompt","getManifest","async","manifestContent","localStorage","getItem","value","JSON","parse","response","fetch","withBase","data","json","setItem","stringify","err","console","error","onMounted","window","hasOwnProperty","event","preventDefault","addEventListener","key","document","onBeforeMount","removeEventListener","scrolltoLeft","screenshotsDiv","querySelector","scrollBy","left","clientWidth","top","behavior","scrolltoRight","install","prompt","dispatchEvent","CustomEvent","userChoice","outcome","info","hint","_hoisted_1","id","_hoisted_2","class","_hoisted_3","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_16","_hoisted_19","_hoisted_22","_createElementVNode","_openBlock","_createElementBlock","onClick","_ctx","$emit","close","_createVNode","_component_CloseIcon","src","icons","alt","short_name","_toDisplayString","explain","_hoisted_11","feature","_hoisted_12","_Fragment","_renderList","features","textContent","_hoisted_14","prevImage","args","_component_ArrowLeftIcon","screenshots","screenshot","nextImage","_component_ArrowRightIcon","desc","description","iOSInstall","_hoisted_23","cancel","PWAInstall","canInstall","hasRelatedApps","isOpen","isSafari","hinted","computed","showInstall","navigator","standalone","matchMedia","matches","userAgent","includes","maxTouchPoints","getInstalledRelatedApps","then","result","length","PWAInstallModal","style","display","onCanInstall","onHint","onToggle"],"mappings":"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"}