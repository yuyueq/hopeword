import{useLocaleConfig as e}from"@mr-hope/vuepress-shared/lib/client";import{usePageFrontmatter as t,usePageLang as o}from"@vuepress/client";import{defineComponent as l,computed as n,onMounted as a,onBeforeUnmount as i,watch as r,nextTick as s,h as m}from"vue";import{useRoute as c}from"vue-router";import"../styles/waline.scss";const u=COMMENT_OPTIONS,p=u;Boolean(p&&"giscus"===p.type&&p.repo&&p.repoId&&p.category&&p.categoryId);const v=u;Boolean(v&&"twikoo"===v.type&&v.envId);const d=u,w=Boolean(d&&"waline"===d.type&&d.serverURL),h=WALINE_LOCALES;var y=l({name:"WalineComment",setup(){const l=c(),u=t(),p=o(),v=e(h);let y,g=null;const f=n((()=>{if(!w)return!1;const e=!1!==d.comment,t=u.value.comment;return Boolean(t)||!1!==e&&!1!==t})),j=n((()=>{if(!w)return!1;const e=!1!==d.pageviews,t=u.value.pageview;return Boolean(t)||!1!==e&&!1!==t})),C=()=>{const e=y=(new Date).getTime();g?setTimeout((()=>{e===y&&g.update({lang:"zh-CN"===p.value?"zh-CN":"en",locale:{...v.value,...d.locale||{}}})}),d.delay):Promise.all([import("@waline/client"),new Promise((e=>{setTimeout(e,d.delay)}))]).then((([{default:t}])=>{e===y&&(g=t({lang:"zh-CN"===p.value?"zh-CN":"en",locale:{...v.value,...d.locale||{}},emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili"],dark:"html.dark",...d,el:"#waline-comment",visitor:j.value}))}))};return a((()=>{w&&C()})),i((()=>{g&&g.destroy()})),r((()=>l.path),(()=>s().then((()=>C())))),()=>m("div",{class:"waline-wrapper",style:{display:f.value?"block":"none"},innerHTML:'<div id="waline-comment" />'})}});export{y as default};
//# sourceMappingURL=Waline.js.map
